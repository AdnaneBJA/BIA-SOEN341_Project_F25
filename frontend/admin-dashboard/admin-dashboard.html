<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../main-page/mainpage.css">
    <link rel="stylesheet" href="admin-dashboard.css">
    <title>Admin Dashboard - BIA</title>

    <script src="../admin-login/admin-login.js"></script>
    <script>
        // FYI, this makes the page inaccessible unless the admin is logged in
        protectAdminPage();
    </script>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>

    <nav class="menu-bar">
        <div class="menu-left">
            <span class="menu-logo"><b>BIA</b></span>
        </div>
        <div class="menu-center">
            <a href="../main-page/mainpage.html">Home</a>
        </div>
        <div class="menu-right">
            <div class="menu-status">
                <span id="user-status">Admin</span>
                <button id="disconnect-btn" class="disconnect-btn" type="button">Disconnect</button>
            </div>
        </div>
    </nav>

    <main class="center-content hero" style="margin-top:40px; gap:12px;">
        <h1>Admin Dashboard</h1>
        <p class="subtitle">Welcome to the admin area. Manage organizers, review events, and view platform analytics.</p>

        <section style="width:95%; max-width:1400px; margin-top:18px;">
            <div style="background:#fff; border-radius:12px; padding:18px; box-shadow:0 4px 12px rgba(0,0,0,0.08);">
                <h2 style="margin-top:0;">Quick Actions</h2>
                <div style="display:flex; gap:12px; flex-wrap:wrap;">
                    <button onclick="location.href='../approve-organizer-page/approve-organizer.html'">Approve Organizer</button>
                    <button onclick="location.href='../moderate-event-listing/moderate-event-listing.html'">Moderate Event Listing</button>
                </div>
            </div>

            <div style="background:#fff; border-radius:12px; padding:18px; box-shadow:0 4px 12px rgba(0,0,0,0.08); margin-top:16px;">
                <h2 style="margin-top:0;">Platform Statistics</h2>
                <table style="width:100%; border-collapse:collapse;">
                    <thead>
                        <tr style="text-align:left; border-bottom:2px solid #eaded3;">
                            <th style="padding:8px">Metric</th>
                            <th style="padding:8px">Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom:1px solid #f0eaea;">
                            <td style="padding:8px">Tickets Issued</td>
                            <td style="padding:8px"><span id="totalTickets">0</span></td>
                        </tr>
                        <tr style="border-bottom:1px solid #f0eaea;">
                            <td style="padding:8px">Total Events</td>
                            <td style="padding:8px"><span id="totalEvents">0</span></td>
                        </tr>
                        <tr style="border-bottom:1px solid #f0eaea;">
                            <td style="padding:8px">Total Participants</td>
                            <td style="padding:8px"><span id="totalParticipants">0</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="background:#fff; border-radius:12px; padding:18px; box-shadow:0 4px 12px rgba(0,0,0,0.08); margin-top:16px;">
                <h2 style="margin-top:0;">Participation trends</h2>
                <div style="display: flex; gap: 2rem; flex-wrap: wrap; justify-content: start;">
                    <canvas id="ticketsChart" style="max-width: 300px; height: 150px; margin-bottom: 2rem; margin-right: 40px"></canvas>
                    <canvas id="participationChart" style="max-width: 300px; height: 150px;"></canvas>
                </div>
            </div>

            <div style="background:#fff; border-radius:12px; padding:18px; box-shadow:0 4px 12px rgba(0,0,0,0.08); margin-top:16px;">
                <h2 style="margin-top:0;">Management</h2>
                <div style="margin-top:12px; display:flex; gap:12px; flex-wrap:wrap;">
                     <button class="admin-btn" id="manage-org-btn">Manage Organizations</button>
                     <button class="admin-btn" id="assign-roles-btn">Assign Roles</button>
                </div>
                 <div id="org-root" style="display:none; margin-top:20px;"></div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer-inner">
            <span>© <span id="year"></span> BIA Events</span>
            <span class="dot">•</span>
            <a href="../event-discovery/event-discovery.html">Explore Events</a>
        </div>
    </footer>

    <!-- External JavaScript files -->
    <script type="text/babel" src="admin-dashboard-react.js"></script>
    <script src="admin-dashboard.js"></script>

</body>
</html>
